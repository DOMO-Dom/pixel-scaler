(function(e){function t(t){for(var r,i,o=t[0],s=t[1],l=t[2],b=0,f=[];b<o.length;b++)i=o[b],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(f.length)f.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},c=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a=(n("5377"),{class:"wrapper"}),c=Object(r["g"])("h1",null,"ぴくせる すけゐらぁ",-1),i=Object(r["f"])(" 変換 "),o={class:"content margin-tb-1"},s={class:"box block margin-tb-2"},l={class:"box block"},u=Object(r["g"])("p",null,"エラーが発生しました。作った人に下記のテキストを送りつけてください。",-1),b={class:"box-reverse block selectable-all"},f=Object(r["e"])('<h2>つかいかた</h2><ol><li>左の数字入力欄から<strong>拡大率(100～400%)</strong>を設定する</li><li>ピクチャを選択ボタンをクリックして<strong>ピクチャを選ぶ</strong></li><li><strong>変換ボタン</strong>をクリックする</li><li>イラスト調で拡大されたピクチャが出てくる</li><li>幸せ！</li></ol><p>※変換元ピクチャの縦横サイズが大きすぎたら変換後ピクチャの一部が途切れます（現在原因究明中…）</p><h2 class="margin-t-2">Tips</h2><ul><li>解像度の低いイラスト(ドット絵ではない)はキレイに拡大されません</li><li>拡大率を100%に指定することでドット絵にアンチエイリアスをかけることができます</li></ul>',5),g={class:"btn-list"},p=Object(r["f"])(" ZIPダウンロード "),d=Object(r["f"])(" リセット "),h={class:"center"},v={class:"margin-tb-4"},j={href:"https://twitter.com/intent/tweet?text=%E3%81%B4%E3%81%8F%E3%81%9B%E3%82%8B%20%E3%81%99%E3%81%91%E3%82%90%E3%82%89%E3%81%81&hashtags=%E3%81%B4%E3%81%8F%E3%81%9B%E3%82%8B%E3%81%99%E3%81%91%E3%82%90%E3%82%89%E3%81%81&url=https://irokaru.github.io/pixel-scaler/",target:"_blank",class:"box circle margin-lr-1 hover active"},m=Object(r["f"])(),O=Object(r["f"])(" 共有 "),w={href:"https://twitter.com/irokaru",target:"_blank",class:"box circle margin-lr-1 hover active"},y=Object(r["f"])(" 作った人 "),x={href:"https://github.com/irokaru/pixel-scaler",target:"_blank",class:"box circle margin-lr-1 hover active"},k=Object(r["f"])(" リポジトリ "),_=Object(r["g"])("footer",null," (C) 2020 ののの茶屋. ",-1);function E(e,t,n,E,R,z){var S=Object(r["n"])("v-fa"),I=Object(r["n"])("Loading");return Object(r["j"])(),Object(r["c"])("div",a,[Object(r["g"])("main",null,[c,Object(r["g"])("nav",null,[Object(r["r"])(Object(r["g"])("input",{class:"col",type:"number","onUpdate:modelValue":t[1]||(t[1]=function(e){return R.size=e}),min:"100",max:"400",placeholder:"拡大率"},null,512),[[r["p"],R.size,void 0,{number:!0}]]),Object(r["g"])("label",{class:"col-big box circle hover active pointer",onDragover:t[3]||(t[3]=Object(r["s"])((function(){}),["prevent"])),onDrop:t[4]||(t[4]=Object(r["s"])((function(){return z.setFiles.apply(z,arguments)}),["prevent"]))},[Object(r["g"])("input",{type:"file",accept:"image/png, image/jpeg, image/gif",multiple:"",onChange:t[2]||(t[2]=function(){return z.setFiles.apply(z,arguments)})},null,32),Object(r["g"])(S,{icon:["far","file-image"]}),Object(r["f"])(" "+Object(r["o"])(R.files.length?"".concat(R.files.length,"件のファイルを選択中"):"ピクチャを選択(gif/jpeg/png)"),1)],32),Object(r["g"])("div",{class:"col box circle hover active pointer",onClick:t[5]||(t[5]=function(){return z.convert.apply(z,arguments)})},[Object(r["g"])(S,{icon:"reply",flip:"vertical"}),i])]),Object(r["g"])("div",o,[Object(r["r"])(Object(r["g"])("div",s,[Object(r["g"])(S,{icon:"times-circle",class:"close-btn pointer",onClick:t[6]||(t[6]=function(e){return R.errors=[]})}),Object(r["g"])("ul",null,[(Object(r["j"])(!0),Object(r["c"])(r["a"],null,Object(r["m"])(R.errors,(function(e){return Object(r["j"])(),Object(r["c"])("li",{key:e.id},Object(r["o"])(e),1)})),128))])],512),[[r["q"],0!==R.errors.length]]),Object(r["g"])("div",l,[R.exception?(Object(r["j"])(),Object(r["c"])(r["a"],{key:0},[Object(r["g"])(S,{icon:"times-circle",class:"close-btn pointer",onClick:t[7]||(t[7]=function(e){return R.exception=null})}),u,Object(r["g"])("pre",b,Object(r["o"])(R.exception),1)],64)):0===R.converted.length?(Object(r["j"])(),Object(r["c"])(r["a"],{key:1},[f],64)):(Object(r["j"])(),Object(r["c"])(r["a"],{key:2},[Object(r["g"])("div",g,[Object(r["g"])("div",{class:"col box circle hover active pointer margin-lr-1",onClick:t[8]||(t[8]=function(){return z.download.apply(z,arguments)})},[Object(r["g"])(S,{icon:["far","file-archive"]}),p]),Object(r["g"])("div",{class:"col box circle hover active pointer margin-lr-1",onClick:t[9]||(t[9]=function(){return z.resetConverted.apply(z,arguments)})},[Object(r["g"])(S,{icon:"eraser"}),d]),R.flags.convert?(Object(r["j"])(),Object(r["c"])(I,{key:0})):Object(r["d"])("",!0)]),(Object(r["j"])(!0),Object(r["c"])(r["a"],null,Object(r["m"])(R.converted,(function(e){return Object(r["j"])(),Object(r["c"])("div",{class:"box-reverse block margin-tb-1 scroll",key:e.image.filename},[Object(r["g"])("div",h,[Object(r["g"])("img",{src:z.toShowable(e.original)},null,8,["src"]),Object(r["g"])(S,{icon:"arrow-down",class:"margin-tb-2 big"}),Object(r["g"])("a",{href:e.image.base64,download:e.image.filename},[Object(r["g"])("img",{src:e.image.base64},null,8,["src"])],8,["href","download"])])])})),128))],64))])]),Object(r["g"])("div",v,[Object(r["g"])("a",j,[Object(r["g"])(S,{icon:["fas","share-alt-square"]}),m,Object(r["g"])(S,{icon:["fab","twitter"]}),O]),Object(r["g"])("a",w,[Object(r["g"])(S,{icon:["fab","twitter"]}),y]),Object(r["g"])("a",x,[Object(r["g"])(S,{icon:["fab","github"]}),k])])]),_])}n("99af"),n("07ac");var R=n("b85c"),z=(n("96cf"),n("1da1")),S=(n("d3b7"),n("ac1f"),n("1276"),n("c4e3")),I=n.n(S),A=n("21a6"),L=n.n(A),D={ScaledImagestoZip:function(e){return Object(z["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=new I.a,r=Object(R["a"])(e);try{for(r.s();!(a=r.n()).done;)c=a.value,n.file(c.filename,c.base64.split(",")[1],{base64:!0})}catch(i){r.e(i)}finally{r.f()}return t.abrupt("return",new Promise((function(e,t){n.generateAsync({type:"blob"}).then((function(t){e(t)})).catch((function(e){t(e)}))})));case 4:case"end":return t.stop()}}),t)})))()},download:function(e,t){L.a.saveAs(e,t)}},P=(n("3ca3"),n("ddb0"),n("2b3d"),n("d4ec")),C=n("bee2"),F=n("45eb"),U=n("7e84"),B=n("262e"),T=n("2caf"),M=n("9072"),J=function(e){Object(B["a"])(n,e);var t=Object(T["a"])(n);function n(){return Object(P["a"])(this,n),t.call(this)}return Object(C["a"])(n,[{key:"_readAs",value:function(e,t){var r=this;return new Promise((function(a,c){Object(F["a"])(Object(U["a"])(n.prototype),"addEventListener",r).call(r,"load",(function(e){var t=e.target;return a(t.result)})),Object(F["a"])(Object(U["a"])(n.prototype),"addEventListener",r).call(r,"error",(function(e){var t=e.target;return c(t.error)})),Object(F["a"])(Object(U["a"])(n.prototype),t,r).call(r,e)}))}},{key:"readAsArrayBuffer",value:function(e){return this._readAs(e,"readAsArrayBuffer")}},{key:"readAsDataURL",value:function(e){return this._readAs(e,"readAsDataURL")}},{key:"readAsText",value:function(e){return this._readAs(e,"readAsText")}}]),n}(Object(M["a"])(FileReader)),Z={getFileListOnEvent:function(e){return e.target.files||e.dataTransfer.files},toShowable:function(e){return window.URL.createObjectURL(e)},fileToImageData:function(e,t,n){return Object(z["a"])(regeneratorRuntime.mark((function r(){var a,c,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(new J).readAsDataURL(e);case 2:return a=r.sent,c=document.createElement("canvas"),i=c.getContext("2d"),r.abrupt("return",new Promise((function(e,r){var c=new Image;c.src=a,c.onload=function(){i.drawImage(c,0,0),e(i.getImageData(0,0,t,n))},c.onerror=function(e){r(e)}})));case 6:case"end":return r.stop()}}),r)})))()},imageDataToBase64:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t.toDataURL()},resizeImageData:function(e,t,n){return Object(z["a"])(regeneratorRuntime.mark((function r(){var a,c,i,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t>>0,c=n>>0,r.next=4,window.createImageBitmap(e,0,0,e.width,e.height);case 4:return i=r.sent,o=document.createElement("canvas"),o.width=a,o.height=c,s=o.getContext("2d"),s.scale(a/e.width,c/e.height),s.drawImage(i,0,0),r.abrupt("return",s.getImageData(0,0,a,c));case 12:case"end":return r.stop()}}),r)})))()},getFileScaleSize:function(e){return Object(z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new Image;r.onload=function(){var e={width:r.naturalWidth,height:r.naturalHeight};URL.revokeObjectURL(r.src),t(e)},r.onerror=function(e){n(e)},r.src=URL.createObjectURL(e)})));case 1:case"end":return t.stop()}}),t)})))()}},q=(n("ace4"),n("b0c0"),n("466d"),n("8a59"),n("fb2c"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("e099")),X=n("dbed"),H=function(){function e(t){if(Object(P["a"])(this,e),!this._validate(t))throw new Error("failed create scaled image"+JSON.stringify(t));this.base64=t.base64,this.filename=t.filename,this.type=t.type,this.scale=t.scale}return Object(C["a"])(e,[{key:"_validate",value:function(e){var t={base64:{type:"string"},filename:{type:"string"},type:{type:"string"},scale:{type:"number",min:100,max:400}},n=(new q["a"]).rules(e,t);return n.exec()}}]),e}(),N={scale:function(e,t){var n=this;return Object(z["a"])(regeneratorRuntime.mark((function r(){var a,c,i,o,s,l,u,b,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=n._toParams(e,t),n._validate(a)){r.next=3;break}return r.abrupt("return",{status:"failed",messages:n._validate(a,!0)});case 3:return r.next=5,Z.getFileScaleSize(e);case 5:return c=r.sent,r.next=8,Z.fileToImageData(e,c.width,c.height);case 8:return i=r.sent,o=new Uint32Array(i.data.buffer),s=n._getSizeInteger(t),l=n._getXbr(s),u=l(o,c.width,c.height),b=new ImageData(new Uint8ClampedArray(u.buffer),c.width*s,c.height*s),r.next=16,Z.resizeImageData(b,c.width*t/100,c.height*t/100);case 16:return f=r.sent,r.abrupt("return",{status:"success",image:new H({base64:Z.imageDataToBase64(f),filename:e.name,type:e.type,scale:t}),original:e});case 18:case"end":return r.stop()}}),r)})))()},adjustSize:function(e){return e>400?400:e<100?100:e>>0},_getSizeInteger:function(e){return e<=200?2:e<=300?3:e<=400||400===e?4:void 0},_getXbr:function(e){var t={2:X["a"],3:X["b"],4:X["c"]};return t[e]},_toParams:function(e,t){return{file:e,size:t}},_validate:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={file:{type:"callback",callback:this._validateFile,name:"ファイル"},size:{type:"integer",min:100,max:400,name:"拡大率"}},r=(new q["a"]).rules(e,n);return t?r.errors():r.exec()},_validateFile:function(e){var t=[];return q["a"].isObject(e)&&"[object File]"===toString.call(e)?null==e.type.match(/^image/)?["画像ファイルを選択してください(".concat(e.name,")")]:(null===e.type.match(/^image/)||e.type.match(/^image\/(png|jpeg|gif)/)||t.push("pngかjpegかgifを選択してください(".concat(e.name,")")),t):["画像ファイルを選択してください"]}},V=Object(r["t"])("data-v-6e86ecfe");Object(r["l"])("data-v-6e86ecfe");var W={class:"loader"};Object(r["k"])();var G=V((function(e,t,n,a,c,i){return Object(r["j"])(),Object(r["c"])("div",W,"Loading...")}));n("a8f7");const K={};K.render=G,K.__scopeId="data-v-6e86ecfe";var Q=K,Y={name:"app",data:function(){return{size:200,files:[],converted:[],errors:[],zip:null,exception:null,flags:{convert:!1}}},methods:{setFiles:function(e){this.files=Z.getFileListOnEvent(e),this.converted=[],this.zip=null,this.exception=null},convert:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.converted=[],e.errors=[],e.exception=null,e.size=N.adjustSize(e.size),!e.flags.convert&&0!==e.files.length){t.next=6;break}return t.abrupt("return");case 6:e.flags.convert=!0,console.log("convert start"),n=Object(R["a"])(e.files),t.prev=9,n.s();case 11:if((r=n.n()).done){t.next=20;break}return a=r.value,t.next=15,N.scale(a,e.size).then((function(t){if("success"===t.status)e.converted.push(t);else for(var n=0,r=Object.values(t.messages);n<r.length;n++){var a=r[n];e.errors=e.errors.concat(a)}})).catch((function(t){e.exception=t}));case 15:if(!e.exception){t.next=18;break}return e.flags.convert=!1,t.abrupt("return");case 18:t.next=11;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](9),n.e(t.t0);case 25:return t.prev=25,n.f(),t.finish(25);case 28:c=[],i=Object(R["a"])(e.converted);try{for(i.s();!(o=i.n()).done;)s=o.value,c.push(s.image)}catch(l){i.e(l)}finally{i.f()}return t.next=33,D.ScaledImagestoZip(c).then((function(t){e.zip=t})).catch((function(t){e.exception=t}));case 33:e.flags.convert=!1,console.log("convert end");case 35:case"end":return t.stop()}}),t,null,[[9,22,25,28]])})))()},toShowable:function(e){return Z.toShowable(e)},download:function(){this.flags.convert||D.download(this.zip,"images.zip")},resetConverted:function(){this.flags.convert||(this.files=[],this.converted=[],this.errors=[],this.zip=null)}},components:{Loading:Q}};Y.render=E;var $=Y,ee=n("ecee"),te=n("c074"),ne=n("b702"),re=n("f2d1"),ae=n("ad3d");n("b751");ee["c"].add(te["a"],ne["a"],re["a"]);var ce=Object(r["b"])($);ce.component("v-fa",ae["a"]),ce.mount("#app")},a09b:function(e,t,n){},a8f7:function(e,t,n){"use strict";n("a09b")},b751:function(e,t,n){}});
//# sourceMappingURL=app.26067672.js.map