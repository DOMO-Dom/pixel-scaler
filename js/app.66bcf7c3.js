(function(e){function t(t){for(var r,i,o=t[0],l=t[1],s=t[2],f=0,b=[];f<o.length;f++)i=o[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&b.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(b.length)b.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},c=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var u=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={class:"wrapper"},c=Object(r["f"])("h1",null,"ぴくせる すけゐらぁ",-1),i=Object(r["e"])(" 変換 "),o={class:"content margin-tb-1"},l={class:"box block margin-tb-2"},s={class:"box block"},u=Object(r["f"])("p",null,"エラーが発生しました。作った人に下記のテキストを送りつけてください。",-1),f={class:"box-reverse block selectable-all"},b=Object(r["d"])("<ol><li>左の数字入力欄から<strong>拡大率(100～400%)</strong>を設定する</li><li>ピクチャを選択ボタンをクリックして<strong>ピクチャを選ぶ</strong></li><li><strong>変換ボタン</strong>をクリックする</li><li>拡大されたピクチャが出てくる</li><li>幸せ！</li></ol><p>※ピクチャの縦横サイズが大きすぎたら変換に失敗します</p>",2),p={class:"btn-list"},d=Object(r["e"])(" ZIPダウンロード "),g=Object(r["e"])(" リセット "),h={class:"center"},v={class:"margin-tb-4"},m={href:"https://twitter.com/intent/tweet?text=%E3%81%B4%E3%81%8F%E3%81%9B%E3%82%8B%20%E3%81%99%E3%81%91%E3%82%90%E3%82%89%E3%81%81&hashtags=%E3%81%B4%E3%81%8F%E3%81%9B%E3%82%8B%E3%81%99%E3%81%91%E3%82%90%E3%82%89%E3%81%81&url=https://irokaru.github.io/pixel-scaler/",target:"_blank",class:"box circle margin-lr-1 hover active"},j=Object(r["e"])(),O=Object(r["e"])(" 共有 "),w={href:"https://twitter.com/irokaru",target:"_blank",class:"box circle margin-lr-1 hover active"},y=Object(r["e"])(" 作った人 "),x={href:"https://github.com/irokaru/pixel-scaler",target:"_blank",class:"box circle margin-lr-1 hover active"},k=Object(r["e"])(" リポジトリ "),E=Object(r["f"])("footer",null," (C) 2020 ののの茶屋. ",-1);function _(e,t,n,_,R,z){var S=Object(r["k"])("v-fa");return Object(r["i"])(),Object(r["c"])("div",a,[Object(r["f"])("main",null,[c,Object(r["f"])("nav",null,[Object(r["o"])(Object(r["f"])("input",{class:"col",type:"number","onUpdate:modelValue":t[1]||(t[1]=function(e){return R.size=e}),min:"100",max:"400",placeholder:"拡大率"},null,512),[[r["m"],R.size,void 0,{number:!0}]]),Object(r["f"])("label",{class:"col-big box circle hover active pointer",onDragover:t[3]||(t[3]=Object(r["p"])((function(){}),["prevent"])),onDrop:t[4]||(t[4]=Object(r["p"])((function(){return z.setFiles.apply(z,arguments)}),["prevent"]))},[Object(r["f"])("input",{type:"file",accept:"image/png, image/jpeg, image/gif",multiple:"",onChange:t[2]||(t[2]=function(){return z.setFiles.apply(z,arguments)})},null,32),Object(r["f"])(S,{icon:["far","file-image"]}),Object(r["e"])(" "+Object(r["l"])(R.files.length?"".concat(R.files.length,"件のファイルを選択中"):"ピクチャを選択(gif/jpeg/png)"),1)],32),Object(r["f"])("div",{class:"col box circle hover active pointer",onClick:t[5]||(t[5]=function(){return z.convert.apply(z,arguments)})},[Object(r["f"])(S,{icon:"reply",flip:"vertical"}),i])]),Object(r["f"])("div",o,[Object(r["o"])(Object(r["f"])("div",l,[Object(r["f"])(S,{icon:"times-circle",class:"close-btn pointer",onClick:t[6]||(t[6]=function(e){return R.errors=[]})}),Object(r["f"])("ul",null,[(Object(r["i"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(R.errors,(function(e){return Object(r["i"])(),Object(r["c"])("li",{key:e.id},Object(r["l"])(e),1)})),128))])],512),[[r["n"],0!==R.errors.length]]),Object(r["f"])("div",s,[R.exception?(Object(r["i"])(),Object(r["c"])(r["a"],{key:0},[Object(r["f"])(S,{icon:"times-circle",class:"close-btn pointer",onClick:t[7]||(t[7]=function(e){return R.exception=null})}),u,Object(r["f"])("pre",f,Object(r["l"])(R.exception),1)],64)):0===R.converted.length?(Object(r["i"])(),Object(r["c"])(r["a"],{key:1},[b],64)):(Object(r["i"])(),Object(r["c"])(r["a"],{key:2},[Object(r["f"])("div",p,[Object(r["f"])("div",{class:"col box circle hover active pointer margin-lr-1",onClick:t[8]||(t[8]=function(){return z.download.apply(z,arguments)})},[Object(r["f"])(S,{icon:["far","file-archive"]}),d]),Object(r["f"])("div",{class:"col box circle hover active pointer margin-lr-1",onClick:t[9]||(t[9]=function(){return z.resetConverted.apply(z,arguments)})},[Object(r["f"])(S,{icon:"eraser"}),g])]),(Object(r["i"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(R.converted,(function(e){return Object(r["i"])(),Object(r["c"])("div",{class:"box-reverse block margin-tb-1 scroll",key:e.image.filename},[Object(r["f"])("div",h,[Object(r["f"])("img",{src:z.toShowable(e.original)},null,8,["src"]),Object(r["f"])(S,{icon:"arrow-down",class:"margin-tb-2 big"}),Object(r["f"])("a",{href:e.image.base64,download:e.image.filename},[Object(r["f"])("img",{src:e.image.base64},null,8,["src"])],8,["href","download"])])])})),128))],64))])]),Object(r["f"])("div",v,[Object(r["f"])("a",m,[Object(r["f"])(S,{icon:["fas","share-alt-square"]}),j,Object(r["f"])(S,{icon:["fab","twitter"]}),O]),Object(r["f"])("a",w,[Object(r["f"])(S,{icon:["fab","twitter"]}),y]),Object(r["f"])("a",x,[Object(r["f"])(S,{icon:["fab","github"]}),k])])]),E])}n("99af"),n("07ac"),n("5377");var R=n("b85c"),z=(n("96cf"),n("1da1")),S=(n("d3b7"),n("ac1f"),n("1276"),n("c4e3")),I=n.n(S),A=n("21a6"),D=n.n(A),L={ScaledImagestoZip:function(e){return Object(z["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=new I.a,r=Object(R["a"])(e);try{for(r.s();!(a=r.n()).done;)c=a.value,n.file(c.filename,c.base64.split(",")[1],{base64:!0})}catch(i){r.e(i)}finally{r.f()}return t.abrupt("return",new Promise((function(e,t){n.generateAsync({type:"blob"}).then((function(t){e(t)})).catch((function(e){t(e)}))})));case 4:case"end":return t.stop()}}),t)})))()},download:function(e,t){D.a.saveAs(e,t)}},P=(n("3ca3"),n("ddb0"),n("2b3d"),n("d4ec")),C=n("bee2"),F=n("45eb"),U=n("7e84"),B=n("262e"),T=n("2caf"),M=n("9072"),J=function(e){Object(B["a"])(n,e);var t=Object(T["a"])(n);function n(){return Object(P["a"])(this,n),t.call(this)}return Object(C["a"])(n,[{key:"_readAs",value:function(e,t){var r=this;return new Promise((function(a,c){Object(F["a"])(Object(U["a"])(n.prototype),"addEventListener",r).call(r,"load",(function(e){var t=e.target;return a(t.result)})),Object(F["a"])(Object(U["a"])(n.prototype),"addEventListener",r).call(r,"error",(function(e){var t=e.target;return c(t.error)})),Object(F["a"])(Object(U["a"])(n.prototype),t,r).call(r,e)}))}},{key:"readAsArrayBuffer",value:function(e){return this._readAs(e,"readAsArrayBuffer")}},{key:"readAsDataURL",value:function(e){return this._readAs(e,"readAsDataURL")}},{key:"readAsText",value:function(e){return this._readAs(e,"readAsText")}}]),n}(Object(M["a"])(FileReader)),Z={getFileListOnEvent:function(e){return e.target.files||e.dataTransfer.files},toShowable:function(e){return window.URL.createObjectURL(e)},fileToImageData:function(e,t,n){return Object(z["a"])(regeneratorRuntime.mark((function r(){var a,c,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(new J).readAsDataURL(e);case 2:return a=r.sent,c=document.createElement("canvas"),i=c.getContext("2d"),r.abrupt("return",new Promise((function(e,r){var c=new Image;c.src=a,c.onload=function(){i.drawImage(c,0,0),e(i.getImageData(0,0,t,n))},c.onerror=function(e){r(e)}})));case 6:case"end":return r.stop()}}),r)})))()},imageDataToBase64:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t.toDataURL()},resizeImageData:function(e,t,n){return Object(z["a"])(regeneratorRuntime.mark((function r(){var a,c,i,o,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t>>0,c=n>>0,r.next=4,window.createImageBitmap(e,0,0,e.width,e.height);case 4:return i=r.sent,o=document.createElement("canvas"),o.width=a,o.height=c,l=o.getContext("2d"),l.scale(a/e.width,c/e.height),l.drawImage(i,0,0),r.abrupt("return",l.getImageData(0,0,a,c));case 12:case"end":return r.stop()}}),r)})))()},getFileScaleSize:function(e){return Object(z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new Image;r.onload=function(){var e={width:r.naturalWidth,height:r.naturalHeight};URL.revokeObjectURL(r.src),t(e)},r.onerror=function(e){n(e)},r.src=URL.createObjectURL(e)})));case 1:case"end":return t.stop()}}),t)})))()}},X=(n("ace4"),n("b0c0"),n("466d"),n("8a59"),n("fb2c"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("e099")),q=n("dbed"),H=function(){function e(t){if(Object(P["a"])(this,e),!this._validate(t))throw new Error("failed create scaled image"+JSON.stringify(t));this.base64=t.base64,this.filename=t.filename,this.type=t.type,this.scale=t.scale}return Object(C["a"])(e,[{key:"_validate",value:function(e){var t={base64:{type:"string"},filename:{type:"string"},type:{type:"string"},scale:{type:"number",min:100,max:400}},n=(new X["a"]).rules(e,t);return n.exec()}}]),e}(),N={scale:function(e,t){var n=this;return Object(z["a"])(regeneratorRuntime.mark((function r(){var a,c,i,o,l,s,u,f,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=n._toParams(e,t),n._validate(a)){r.next=3;break}return r.abrupt("return",{status:"failed",messages:n._validate(a,!0)});case 3:return r.next=5,Z.getFileScaleSize(e);case 5:return c=r.sent,r.next=8,Z.fileToImageData(e,c.width,c.height);case 8:return i=r.sent,o=new Uint32Array(i.data.buffer),l=n._getSizeInteger(t),s=n._getXbr(l),u=s(o,c.width,c.height),f=new ImageData(new Uint8ClampedArray(u.buffer),c.width*l,c.height*l),r.next=16,Z.resizeImageData(f,c.width*t/100,c.height*t/100);case 16:return b=r.sent,r.abrupt("return",{status:"success",image:new H({base64:Z.imageDataToBase64(b),filename:e.name,type:e.type,scale:t}),original:e});case 18:case"end":return r.stop()}}),r)})))()},adjustSize:function(e){return e>400?400:e<100?100:e>>0},_getSizeInteger:function(e){return e<=200?2:e<=300?3:e<=400||400===e?4:void 0},_getXbr:function(e){var t={2:q["a"],3:q["b"],4:q["c"]};return t[e]},_toParams:function(e,t){return{file:e,size:t}},_validate:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={file:{type:"callback",callback:this._validateFile,name:"ファイル"},size:{type:"integer",min:100,max:400,name:"拡大率"}},r=(new X["a"]).rules(e,n);return t?r.errors():r.exec()},_validateFile:function(e){var t=[];return X["a"].isObject(e)&&"[object File]"===toString.call(e)?null==e.type.match(/^image/)?["画像ファイルを選択してください(".concat(e.name,")")]:(null===e.type.match(/^image/)||e.type.match(/^image\/(png|jpeg|gif)/)||t.push("pngかjpegかgifを選択してください(".concat(e.name,")")),t):["画像ファイルを選択してください"]}},V={name:"app",data:function(){return{size:200,files:[],converted:[],errors:[],zip:null,exception:null,flags:{convert:!1}}},methods:{setFiles:function(e){this.files=Z.getFileListOnEvent(e),this.converted=[],this.zip=null,this.exception=null},convert:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c,i,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.converted=[],e.errors=[],e.exception=null,e.size=N.adjustSize(e.size),!e.flags.convert&&0!==e.files.length){t.next=6;break}return t.abrupt("return");case 6:e.flags.convert=!0,n=Object(R["a"])(e.files),t.prev=8,n.s();case 10:if((r=n.n()).done){t.next=18;break}return a=r.value,t.next=14,N.scale(a,e.size).then((function(t){if("success"===t.status)e.converted.push(t);else for(var n=0,r=Object.values(t.messages);n<r.length;n++){var a=r[n];e.errors=e.errors.concat(a)}})).catch((function(t){e.exception=t}));case 14:if(!e.exception){t.next=16;break}return t.abrupt("return");case 16:t.next=10;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](8),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:c=[],i=Object(R["a"])(e.converted);try{for(i.s();!(o=i.n()).done;)l=o.value,c.push(l.image)}catch(s){i.e(s)}finally{i.f()}return t.next=31,L.ScaledImagestoZip(c).then((function(t){e.zip=t})).catch((function(t){e.exception=t}));case 31:e.flags.convert=!1;case 32:case"end":return t.stop()}}),t,null,[[8,20,23,26]])})))()},toShowable:function(e){return Z.toShowable(e)},download:function(){L.download(this.zip,"images.zip")},resetConverted:function(){this.files=[],this.converted=[],this.errors=[],this.zip=null}}};V.render=_;var W=V,G=n("ecee"),K=n("c074"),Q=n("b702"),Y=n("f2d1"),$=n("ad3d");n("b751");G["c"].add(K["a"],Q["a"],Y["a"]);var ee=Object(r["b"])(W);ee.component("v-fa",$["a"]),ee.mount("#app")},b751:function(e,t,n){}});
//# sourceMappingURL=app.66bcf7c3.js.map